---
import Layout from '../layouts/Layout.astro';
import Arrow from "../components/Arrow.astro";
import { questions as questionsStore } from "../store/questions";
import { getQuizzes } from "../services/quizAPI";
import AnimatedBackground from '../components/AnimatedBackground.astro';

// Get questions
const questions = await getQuizzes();
let firstId
if (questions && questions.length > 0) {
  firstId = questions[0].id;
  questionsStore.set(questions);
}
---

<Layout title="Welcome to Quizzler">
	<AnimatedBackground mainColor="4242e0" figureColor='EBEFF2'/>
	<main class="min-w-screen min-h-screen w-full">
		<div id="figure" class="fixed -top-[73%] -left-[27%] -z-10" transition:name="figure"></div>
		<section id="hero" class="absolute left-2/5 top-4/12">
			<h1 class="text-center">Quizzler</h1>
			<div id="By" class="flex flex-row gap-[1vw] justify-end">
				<p class="text-center mt-[-0.5vw]">By:</p>
				<div class="flex flex-row items-center justify-center gap-[0.5vw]">
					<img src="/Forge Isotype.svg" alt="Forge Isotype" class="h-[3vw] w-auto">
					<img src="/Forge Logotype.svg" alt="Forge Logotype" class="h-[3vw] w-auto">
				</div>
			</div>
			<div class="flex justify-end mt-[3vw]">
				<a href=`/quiz/${firstId}` class="flex justify-end items-center hover:underline w-fit">
					Let's start the Quiz
					<Arrow/>
				</a>
			</div>
		</section>
	</main>
</Layout>

	
<style>
	#figure{
		background-color: #EBEFF2;
		-webkit-mask: url("/2D Figure.svg") no-repeat center;
		mask: url("/2D Figure.svg") no-repeat center;
		aspect-ratio: 1/1;
		mask-size: contain;
        width: 100%;
        min-width: 130vw;
		transform: rotate(155.32deg);
	}

	h1{
		font-weight: 400;
		font-size: 16vw;
		line-height: 76%;
		color: #EBEFF2;
	}

	p, a{
		font-weight: 400;
		line-height: 100%;
		color: #EBEFF2;
		text-transform: uppercase;
	}

	p{
		font-size: 1vw;
	}

	a{
		font-size: 1rem;
	}

	@media screen and (max-width:1024px){
		h1{
			font-size: 24vw;
		}
		p{
			font-size: 1.5vw;
		}
		#hero{
			left: 22%;
		}
	}

	@media screen and (max-width:768px){
		h1{
			font-size: 32vw;
		}

		p{
			font-size: 2.5vw;
		}

		#hero{
			left: 0;
			top: 0;
			position: relative;
			align-items: center;
			justify-content: center;
		}

		#figure{
			top: -23%;
		}

		main{
			position: relative;
			display: flex;
			align-items: center;
			justify-content: center;
		}
	}
</style>
<script>
	const anchor = document.querySelector('a') as HTMLAnchorElement;
	const arrow = document.getElementsByClassName('arrow')[0] as HTMLElement;
	anchor.addEventListener('mouseover', () => arrow.classList.add('go'));
	anchor.addEventListener('mouseout', () => arrow.classList.remove('go'));
</script>